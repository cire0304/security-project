<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #3d4e56fa;
      display: flex;
    }

    button {
      width: 70px;
      height: 70px;
      border: none;
      border-radius: 8px;
      margin: 12px;
      cursor: move;
      font-size: 30px;
      background: #eaeaea4f;
    }

    .container {
      margin: 10px;
      padding: 10px;
      background-color: #b5c1dc57;
      border-radius: 8px;
    }

    .draggable.dragging {
      opacity: 0.5;
    }
  </style>

  <div class="container">
    <button class="draggable" draggable="true">ğŸ¦Š</button>
    <button class="draggable" draggable="true">ğŸ¸</button>
  </div>
  <div class="container">
    <button class="draggable" draggable="true">ğŸ¶</button>
    <button class="draggable" draggable="true">ğŸ±</button>
  </div>


  <script>
    const draggables = document.querySelectorAll(".draggable");
    const containers = document.querySelectorAll(".container");

    draggables.forEach(draggable => {
      draggable.addEventListener("dragstart", () => {
        draggable.classList.add("dragging");
      });

      draggable.addEventListener("dragend", () => {
        draggable.classList.remove("dragging");
      });
    });

    containers.forEach(container => {
      container.addEventListener("dragover", e => {
        e.preventDefault();
        const afterElement = getDragAfterElement(container, e.clientX);
        const draggable = document.querySelector(".dragging");
        if (afterElement === undefined) {
          container.appendChild(draggable);
        } else {
          container.insertBefore(draggable, afterElement);
        }
      });
    });

    function getDragAfterElement(container, x) {
      const draggableElements = [
        ...container.querySelectorAll(".draggable:not(.dragging)"),
      ];

      return draggableElements.reduce(
        (closest, child) => {
          const box = child.getBoundingClientRect();
          const offset = x - box.left - box.width / 2;
          // console.log(offset);
          if (offset < 0 && offset > closest.offset) {
            return { offset: offset, element: child };
          } else {
            return closest;
          }
        },
        { offset: Number.NEGATIVE_INFINITY },
      ).element;
    }
  </script>

</body>

</html>

<!-- 
<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Drag & Drop</title>
</head>

<body>
  <style>
    body,
    div {
      margin: 0;
    }

    .container {
      background-color: #f3f5f7;
      padding: 2rem;
      border-collapse: collapse;
    }

    .container:nth-child(n+2) {
      margin-top: 1rem;
    }

    .draggable {
      height: 82px;
      line-height: 82px;
      padding: 0 20px;
      background-color: white;
      border: 1px solid #c5cdd7;
      border-bottom: none;
      box-sizing: border-box;
      cursor: move;
    }

    .draggable:last-child {
      border-bottom: 1px solid #c5cdd7;
    }

    .draggable.dragging {
      opacity: .5;
      border: 2px dashed red;
    }

    .el {
      display: inline-block;
      vertical-align: middle;
    }

    .ico-drag {
      display: inline-block;
      vertical-align: inherit;
      width: 15px;
      height: 15px;
      background: url(./menu.png) no-repeat center top;
      background-size: cover;
    }
  </style>

  <div class="container">
    <div class="draggable" draggable="true">
      <span class="ico-drag"></span>
      <div class="el">HTML</div>
    </div>
    <div class="draggable" draggable="true">
      <span class="ico-drag"></span>
      <div class="el">CSS</div>
    </div>
    <div class="draggable" draggable="true">
      <span class="ico-drag"></span>
      <div class="el">JavaScript</div>
    </div>
  </div>

  <div class="container">
    <div class="draggable" draggable="true">
      <span class="ico-drag"></span>
      <div class="el">React</div>
    </div>
    <div class="draggable" draggable="true">
      <span class="ico-drag"></span>
      <div class="el">Vue</div>
    </div>
    <div class="draggable" draggable="true">
      <span class="ico-drag"></span>
      <div class="el">Next JS</div>
    </div>
  </div>

  <script>
    /**
 * [x] ì—˜ë¦¬ë¨¼íŠ¸ì˜ .draggable, .containerì˜ ë°°ì—´ë¡œ ì„ íƒìë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
 * [x] draggablesë¥¼ ì „ì²´ë¥¼ ë£¨í”„í•˜ë©´ì„œ dragstart, dragendë¥¼ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
 * [x] dragstart, dragend ì´ë²¤íŠ¸ë¥¼ ë°œìƒí• ë•Œ .draggingë¼ëŠ” í´ë˜ìŠ¤ë¥¼ í† ê¸€ì‹œí‚¨ë‹¤.
 * [x] dragover ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ëŠ” ë™ì•ˆ ë§ˆìš°ìŠ¤ ë“œë˜ê·¸í•˜ê³  ë§ˆì§€ë§‰ ìœ„ì¹˜í•´ë†“ì€ Elementë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤.
 */

    (() => {
      const $ = (select) => document.querySelectorAll(select);
      const draggables = $('.draggable');
      const containers = $('.container');

      draggables.forEach(el => {
        el.addEventListener('dragstart', () => {
          el.classList.add('dragging');
        });

        el.addEventListener('dragend', () => {
          el.classList.remove('dragging')
        });
      });

      function getDragAfterElement(container, y) {
        const draggableElements = [...container.querySelectorAll('.draggable:not(.dragging)')]

        return draggableElements.reduce((closest, child) => {
          const box = child.getBoundingClientRect() //í•´ë‹¹ ì—˜ë¦¬ë¨¼íŠ¸ì— topê°’, heightê°’ ë‹´ê²¨ì ¸ ìˆëŠ” ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ boxë³€ìˆ˜ì— í• ë‹¹
          const offset = y - box.top - box.height / 2 //ìˆ˜ì§ ì¢Œí‘œ - topê°’ - heightê°’ / 2ì˜ ì—°ì‚°ì„ í†µí•´ì„œ offsetë³€ìˆ˜ì— í• ë‹¹
          if (offset < 0 && offset > closest.offset) { // (ì˜ˆì™¸ ì²˜ë¦¬) 0 ì´í•˜ ì™€, ìŒì˜ ë¬´í•œëŒ€ ì‚¬ì´ì— ì¡°ê±´
            return { offset: offset, element: child } // Elementë¥¼ ë¦¬í„´
          } else {
            return closest
          }
        }, { offset: Number.NEGATIVE_INFINITY }).element
      };

      containers.forEach(container => {
        container.addEventListener('dragover', e => {
          e.preventDefault()
          const afterElement = getDragAfterElement(container, e.clientY);
          const draggable = document.querySelector('.dragging')
          // container.appendChild(draggable)
          container.insertBefore(draggable, afterElement)
        })
      });
    })();
  </script>

</body>

</html> -->